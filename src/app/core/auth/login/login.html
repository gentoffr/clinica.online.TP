<div class="content">
  <form class="form" #f="ngForm" (ngSubmit)="loginSubmit(f)" autocomplete="on">
    <div class="icon-strip-wrapper">
      <button type="button" class="scroll-btn left" (click)="scrollStrip(-1)" aria-label="Desplazar a la izquierda">‹</button>
      <div class="icon-strip" #strip>
        <button
          type="button"
          class="icono"
          *ngFor="let u of usuarios; let i = index"
          [ngClass]="'role-' + averiguarRol(u)"
          [attr.aria-label]="(u?.nombre || '') + ' ' + (u?.apellido || '')"
          [attr.title]="(u?.nombre || '') + ' ' + (u?.apellido || '')"
          [attr.aria-pressed]="selectedIcon===i"
          (click)="selectIcon(i)"
        >
          <img class="icono-img" [src]="getFoto(u)" [alt]="(u?.nombre || 'Usuario') + ' ' + (u?.apellido || '')" />
        </button>
      </div>
      <button type="button" class="scroll-btn right" (click)="scrollStrip(1)" aria-label="Desplazar a la derecha">›</button>
    </div>
    <br>
    <h2>Iniciar sesión</h2>
    <label>
      <span>Usuario</span>
      <input type="text" [(ngModel)]="usuario" name="usuario" required [class.invalid]="submitted && !usuario" [disabled]="loading" />
      <small class="error" *ngIf="submitted && !usuario">Usuario es requerido</small>
      <small class="error" *ngIf="submitted && !password">Contraseña es requerida</small>
    </label>
    <label>
      <span>Contraseña</span>
      <input type="password" [(ngModel)]="password" name="password" required [class.invalid]="submitted && !password" [disabled]="loading" />
    </label>
    <div class="actions">
      <button type="submit" class="btn" [disabled]="loading || !usuario || !password">
        <span class="spinner" *ngIf="loading" aria-hidden="true"></span>
        <span>{{ loading ? 'Entrando…' : 'Entrar' }}</span>
      </button>
      <button type="button" class="btn-secondary" (click)="volver.emit()" [disabled]="loading">Volver</button>
    </div>
    <div class="hint">
      ¿Sin cuenta? <button type="button" class="link" (click)="registrar.emit()">Crear una</button>
    </div>
    <div class="legend" aria-label="Leyenda de perfiles">
      <span class="legend-item"
        ><span class="legend-dot legend-red"></span> Rojo: dueño</span
      >
      <span class="legend-item"
        ><span class="legend-dot legend-yellow"></span> Amarillo: especialista</span
      >
      <span class="legend-item"
        ><span class="legend-dot legend-teal"></span> Turquesa: paciente</span
      >
    </div>
  </form>
</div>
